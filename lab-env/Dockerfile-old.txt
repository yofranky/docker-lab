# ===========================
# Base Image & Environment
# ===========================
FROM ubuntu:24.04
LABEL maintainer="yofranky"
ENV DEBIAN_FRONTEND=noninteractive
WORKDIR /home/lab

# ===========================
# Base Tools
# ===========================
RUN apt-get update && apt-get upgrade -y && \
    apt-get install -y \
        curl \
        vim \
        unzip \
        wget \
        sudo \
        bash-completion \
        ca-certificates \
        gnupg \
        software-properties-common \
        lsb-release \
    && rm -rf /var/lib/apt/lists/*

# ===========================
# Networking Lab Tools
# ===========================
RUN apt-get update && apt-get install -y \
        tcpdump \
        nload \
        iproute2 \
        net-tools \
        dnsutils \
        iputils-ping \
        traceroute \
        nmap \
    && rm -rf /var/lib/apt/lists/*

# ===========================
# HashiCorp Tools (Terraform + Packer)
# ===========================
RUN curl -fsSL https://apt.releases.hashicorp.com/gpg | gpg --dearmor -o /usr/share/keyrings/hashicorp-archive-keyring.gpg && \
    echo "deb [signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] \
    https://apt.releases.hashicorp.com $(lsb_release -cs) main" \
    | tee /etc/apt/sources.list.d/hashicorp.list && \
    apt-get update && apt-get install -y terraform packer && \
    rm -rf /var/lib/apt/lists/*

# ===========================
# CI/CD Lab Tools
# ===========================
RUN apt-get update && apt-get install -y \
        git \
        make \
    && rm -rf /var/lib/apt/lists/*

# ===========================
# Default CMD
# ===========================
CMD ["/bin/bash"]
